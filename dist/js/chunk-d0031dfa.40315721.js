(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d0031dfa"],{7956:function(e,t,o){"use strict";o("fda2")},dc3f:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[o("el-form",{ref:"loginForm",staticClass:"login-form ele-bg-white",attrs:{model:e.form,rules:e.rules,size:"large"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSubmit(t)}}},[o("h4",[e._v("登录")]),o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"请输入登录账号","prefix-icon":"el-icon-user",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{placeholder:"请输入登录密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),o("div",{staticClass:"el-form-item"}),o("div",{staticClass:"el-form-item"},[o("el-button",{attrs:{loading:e.loading,type:"primary",size:"medium"},on:{click:e.doSubmit}},[e._v(" "+e._s(e.loading?"登录中":"登录")+" ")]),o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.$router.push("/register")}}},[e._v(" 注册 ")]),o("el-button",{attrs:{type:"success",size:"medium"},on:{click:function(t){return e.lineLogin()}}},[e._v(" line登录 ")])],1)],1)],1)},s=[],n={name:"Login",data:function(){return{direction:1,loading:!1,form:{username:"t123@qq.com",password:"123456",remember:!0},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},mounted:function(){this.$store.state.user.token&&this.$router.push(this.$route.query.from||"/")},methods:{doSubmit:function(){var e=this;this.$refs["loginForm"].validate((function(t){if(!t)return!1;e.loading=!0,e.$http.post("/auth/login",e.form).then((function(t){var o=t.status,r=t.data,s=t.statusText;e.loading=!1,200===o?(e.$message({type:"success",message:"登录成功"}),e.$store.dispatch("user/setToken",r.token_type+" "+r.access_token).then((function(){e.$router.push(e.$route.query.from||"/").catch((function(){}))}))):e.$message.error(s)})).catch((function(t){console.log(t),e.loading=!1,e.$message.error("用户名或密码不正确")}))}))},lineLogin:function(){var e=this;this.$http.get("/login/line",this.form).then((function(t){var o=t.status,r=t.data,s=t.statusText;console.log(o),e.loading=!1,200===o?(console.log(r),window.location.href=r):(console.log(r),e.$message.error(s))})).catch((function(t){console.log(t),e.loading=!1,e.$message.error("网络错误")}))}}},i=n,a=(o("7956"),o("2877")),l=Object(a["a"])(i,r,s,!1,null,"4a64d0ee",null);t["default"]=l.exports},fda2:function(e,t,o){}}]);