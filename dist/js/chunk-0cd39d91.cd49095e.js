(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cd39d91"],{b953:function(e,r,o){"use strict";o.r(r);var t=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[o("el-form",{ref:"loginForm",staticClass:"login-form ele-bg-white",attrs:{model:e.form,rules:e.rules,size:"large"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.doSubmit.apply(null,arguments)}}},[o("h4",[e._v("注册教师")]),o("el-form-item",{attrs:{label:"用户名:",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入登录账号","prefix-icon":"el-icon-user",clearable:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[o("el-input",{attrs:{placeholder:"请输入邮箱","prefix-icon":"el-icon-user",clearable:""},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),o("el-form-item",{attrs:{label:"新密码:",prop:"password"}},[o("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),o("el-form-item",{attrs:{label:"确认密码:",prop:"password_confirmation"}},[o("el-input",{attrs:{placeholder:"请再次输入新密码","show-password":""},model:{value:e.form.password_confirmation,callback:function(r){e.$set(e.form,"password_confirmation",r)},expression:"form.password_confirmation"}})],1),o("el-input",{attrs:{type:"hidden",placeholder:""},model:{value:e.form.sid,callback:function(r){e.$set(e.form,"sid",r)},expression:"form.sid"}}),o("div",{staticClass:"el-form-item"},[o("el-button",{attrs:{loading:e.loading,type:"primary",size:"medium"},on:{click:e.doSubmit}},[e._v(" "+e._s(e.loading?"注册中":"注册")+" ")]),o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(r){return e.$router.push("/login")}}},[e._v(" 返回登录 ")])],1)],1)],1)},s=[],i={name:"Login",data:function(){return{direction:1,loading:!1,form:{name:"",email:"",password:"",password_confirmation:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],password_confirmation:[{required:!0,message:"请输入确认密码",trigger:"blur"}]}}},mounted:function(){this.form.email=this.$route.query.email,this.form.sid=this.$route.query.sid,this.$store.state.user.token&&this.$router.push(this.$route.query.from||"/")},methods:{doSubmit:function(){var e=this;this.$refs["loginForm"].validate((function(r){if(!r)return!1;e.loading=!0,e.$http.post("/auth/register",e.form).then((function(r){var o=r.status,t=r.data,s=r.statusText;e.loading=!1,200===o?(e.$message({type:"success",message:"登录成功"}),e.$store.dispatch("user/setToken",t.token_type+" "+t.access_token).then((function(){e.$router.push(e.$route.query.from||"/").catch((function(){}))}))):e.$message.error(s)})).catch((function(r){console.log(r),e.loading=!1,e.$message.error("注册失败")}))}))}}},a=i,n=(o("f8ff"),o("2877")),l=Object(n["a"])(a,t,s,!1,null,"30a0aad7",null);r["default"]=l.exports},d3ee:function(e,r,o){},f8ff:function(e,r,o){"use strict";o("d3ee")}}]);