(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33cd743a"],{3486:function(e,r,o){},b953:function(e,r,o){"use strict";o.r(r);var t=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[o("el-form",{ref:"loginForm",staticClass:"login-form ele-bg-white",attrs:{model:e.form,rules:e.rules,size:"large"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.doSubmit(r)}}},[o("h4",[e._v("注册教师")]),o("el-form-item",{attrs:{label:"用户名:",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入登录账号","prefix-icon":"el-icon-user",clearable:""},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[o("el-input",{attrs:{placeholder:"请输入邮箱","prefix-icon":"el-icon-user",clearable:""},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),o("el-form-item",{attrs:{label:"新密码:",prop:"password"}},[o("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),o("el-form-item",{attrs:{label:"确认密码:",prop:"password_confirmation"}},[o("el-input",{attrs:{placeholder:"请再次输入新密码","show-password":""},model:{value:e.form.password_confirmation,callback:function(r){e.$set(e.form,"password_confirmation",r)},expression:"form.password_confirmation"}})],1),o("div",{staticClass:"el-form-item"},[o("el-button",{attrs:{loading:e.loading,type:"primary",size:"medium"},on:{click:e.doSubmit}},[e._v(" "+e._s(e.loading?"注册中":"注册")+" ")]),o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(r){return e.$router.push("/login")}}},[e._v(" 返回登录 ")])],1)],1)],1)},s=[],a={name:"Login",data:function(){return{direction:1,loading:!1,form:{name:"teacher",email:"t"+Math.round(100*Math.random())+"@qq.com",password:"123456",password_confirmation:"123456"},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],password_confirmation:[{required:!0,message:"请输入确认密码",trigger:"blur"}]}}},mounted:function(){this.$store.state.user.token&&this.$router.push(this.$route.query.from||"/")},methods:{doSubmit:function(){var e=this;this.$refs["loginForm"].validate((function(r){if(!r)return!1;e.loading=!0,e.$http.post("/auth/register",e.form).then((function(r){var o=r.status,t=r.data,s=r.statusText;e.loading=!1,200===o?(e.$message({type:"success",message:"登录成功"}),e.$store.dispatch("user/setToken",t.token_type+" "+t.access_token).then((function(){e.$router.push(e.$route.query.from||"/").catch((function(){}))}))):e.$message.error(s)})).catch((function(r){console.log(r),e.loading=!1,e.$message.error("注册失败")}))}))}}},n=a,i=(o("cdb1"),o("2877")),l=Object(i["a"])(n,t,s,!1,null,"d8d1fa56",null);r["default"]=l.exports},cdb1:function(e,r,o){"use strict";o("3486")}}]);